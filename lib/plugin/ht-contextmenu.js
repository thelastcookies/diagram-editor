!function(f,b){"use strict";var Z="ht",N=f[Z],C="position",$="absolute",z="px",E="left",h="top",w="innerHTML",B="className",Q="width",c="height",L="0",W="display",M="none",D="visibility",P="user-select",r="margin",S="padding",d=null,K=N.Color,t=N.Default,g=t.getInternal(),i=f.setTimeout,u=f.setInterval,m=f.clearTimeout,U=f.clearInterval,p=f.parseInt,I=t.isLeftButton,A=t.isDragging,v=t.startDragging,T=t.getDistance,n=t.isTouchable,R=K.widgetIconHighlight,e=K.widgetIconBorder,X=K.widgetIconGradient,Y=function(){return document},G=function(P,$){return P.querySelectorAll($)},_=function(c){var F=Y().createElement(c);return"ul"===c&&(O(F,C,"relative"),O(F,r,L),O(F,S,L),O(F,"list-style",M),O(F,"box-sizing","border-box"),O(F,"-moz-box-sizing","border-box"),O(F,W,"inline-block"),O(F,"vertical-align","text-bottom"),O(F,"border","1px solid "+t.contextMenuBorderColor),O(F,"box-shadow","0 0 16px 1px "+t.contextMenuShadowColor),O(F,"overflow","hidden"),t.contextMenuBorderRadius&&O(F,"border-radius",t.contextMenuBorderRadius+z)),F},j=function(f){var Z=f.touches[0];return Z?Z:f.changedTouches[0]},J=function(){return _("div")},o=function(){return _("canvas")},O=function(v,w,N){v.style.setProperty(w,N,d)},V=function(I,y,d){t.def(N.widget[I],y,d)},y=function(X,B){X.appendChild(B)},l=function(P,F){P.removeChild(F)},x=t.eventListenerOptionsFalse,s=(t.eventListenerOptionsTrue,function(N,B,o,J){N.addEventListener(B,o,J?x:x)}),q=function(B,S,J,C){B.removeEventListener(S,J,C?x:x)};g.addMethod(t,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:e},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:R}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:e},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:R,gradient:t.imageGradient,gradientColor:X,background:R}]},contextMenuLabelFont:(n?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var H=function(Y){var i=this,Z=Y._view;if(i.$11b=Y,i.addListeners(),s(Z,"contextmenu",function(R){R.preventDefault()}),!n){var j=i.$37b=i.$36b.bind(i);s(Z,"mouseover",j),s(Z,"mouseout",j)}};t.def(H,b,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(Y){if(t.preventDefault(Y),I(Y)){for(var L=this,s=L.$11b,S=L.getView(),C=S.children,T=0;T<C.length;T++){var X=C[T],h=X.$24b,R=X.$25b;if(h&&h.contains(Y.target))return s.scrollUp(X),L.$28b=i(function(){L.$29b=u(function(){s.scrollUp(X)},100)},500),v(L,Y),void 0;if(R&&R.contains(Y.target))return s.scrollDown(X),L.$28b=i(function(){L.$29b=u(function(){s.scrollDown(X)},100)},500),v(L,Y),void 0}n&&(Y=j(Y)),L.$30b={x:Y.pageX,y:Y.pageY}}},handle_mousedown:function(g){this.handle_touchstart(g)},handle_touchend:function(V){if(I(V)){var Q=this,M=Q.$30b,_=n?{x:j(V).pageX,y:j(V).pageY}:{x:V.pageX,y:V.pageY};if(!M||T(M,_)>1)return delete Q.$30b,void 0;for(var v=Q.getView(),R=Q.$11b,W=V.target,J=d,A=d,g=R._items,K=v.$26b,u=0;u<K.length;u++)if(A=K[u],A.contains(W)){J=A.getAttribute("data-id");break}if(J&&g){var N=R.$17b(g,function(P){return P._id===J});if(N){var k=!1;N.disabled instanceof Function?k=N.disabled.call(R,N):N.disabled===!0&&(k=!0),k||(N.items?n&&Q.$36b(A,!0):R.$1b(N,V))}}delete Q.$30b}},$36b:function(M,T){if(!A()){var Y,S=this,d=S.$11b,c=S.getView(),m=d.$20b||c.children[0],w=d.$19b,C=c.$26b,N=c.children,_=M.target,b=c.getBoundingClientRect(),V=t.getWindowInfo(),W=V.width,n=V.height,p=function(b){for(var Q=0;Q<N.length;Q++){var D=N[Q],$=new RegExp(b+"$"),l=D[B];if(l&&($.test(l)||l.indexOf(b+" ")>=0))return D}},i=function(q){for(var k=0;k<C.length;k++){var t=C[k],A=new RegExp(q+"$"),g=t[B];if(g&&(A.test(g)||g.indexOf(q+" ")>=0))return t}},I=function(m){var L=i("menu-item"+m.$45b),C=L.getBoundingClientRect(),k=C.top-b.top,l=C.left-b.left;O(m,h,k+z),O(m,E,l+C.width+z);var K=m.getBoundingClientRect(),v=K.top,x=K.left,G=K.height,Z=K.width,Q=v+G+2,U=x+Z+2;Q>n&&O(m,h,k+n-Q+z),U>W&&O(m,E,l-Z+z)};if(T)Y=M;else{if("mouseover"===M.type){for(var F=0;F<C.length;F++){var $=C[F];if($.contains(_)){Y=$;break}}if(!Y&&w){var P=w.parentNode,g=p("submenu"+w.getAttribute("data-id"));(g&&g.contains(_)||P&&P.contains(_))&&(Y=w)}}else if("mouseout"===M.type){for(var Q=!1,e=M.relatedTarget,F=0;F<N.length;F++){var u=N[F];if("hidden"!==u.style.visibility&&u.contains(e)){Q=!0;break}}if(Q)return}!Y&&m&&(Y=i("menu-item"+(m.$45b||"NaN")))}if(Y!=w){if(w)for(var X=w;X;){if(X[B]=X[B].replace(" menu-item-hover",""),X[B].indexOf("disabled")<0){var K=d.getItemByProperty("_id",X.getAttribute("data-id"));null!=K.background?K.background instanceof Function?O(X,"background-color",K.background.call(d,K)):O(X,"background-color",K.background):O(X,"background-color",t.contextMenuBackground),O(X,"color",t.contextMenuLabelColor)}var r=p("submenu"+X.getAttribute("data-id"));r&&O(r,D,"hidden");var k=X.parentNode;X=i("menu-item"+(k.$45b||"NaN"))}if(Y){for(var s=Y,L=[];s;){s[B]+=" menu-item-hover",s[B].indexOf("disabled")<0&&(O(s,"background-color",t.contextMenuHoverBackground),O(s,"color",t.contextMenuHoverLabelColor));var q=p("submenu"+s.getAttribute("data-id"));q&&(O(q,D,"visible"),L.push(q));var k=s.parentNode;s=i("menu-item"+(k.$45b||"NaN"))}L.reverse(),L.forEach(function(X){I(X)})}}d.$19b=Y,d.$20b=Y?Y.parentNode:c.children[0]}},handle_mouseup:function(H){this.handle_touchend(H)},handleWindowTouchEnd:function(){var T=this;T.$28b!=d&&(m(T.$28b),delete T.$28b),T.$29b!=d&&(U(T.$29b),delete T.$29b),delete T.$34b,delete T.$30b,delete T.$35b},handleWindowMouseUp:function(g){this.handleWindowTouchEnd(g)},handle_mousemove:function(H){this.handle_touchmove(H)},handle_touchmove:function(L){if(!A()&&I(L)){for(var q=this,X=q.getView().children,Z=d,Y=0;Y<X.length;Y++){var s=X[Y];if(s.contains(L.target)){Z=s;break}}var F=q.$30b,B=n?{x:j(L).pageX,y:j(L).pageY}:{x:L.pageX,y:L.pageY};Z&&F&&T(F,B)>2&&(v(q,L),q.$34b=Z,q.$35b=Z.$18b)}},handleWindowTouchMove:function(Z){Z.preventDefault();var g=this,O=g.$11b,w=g.$34b,J=g.$35b,z=g.$30b;if(z&&w){var W=n?{x:j(Z).pageX,y:j(Z).pageY}:{x:Z.pageX,y:Z.pageY},k=W.y-z.y;k>0?O.scrollUp(w,w.$18b-(J-k)):O.scrollDown(w,J-k-w.$18b)}},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},$10b:function(o,w){o.preventDefault();for(var T=this,h=T.getView().children,R=d,y=0;y<h.length;y++){var Q=h[y];if(Q.contains(o.target)){R=Q;break}}if(R){var k=this.$11b,n=k.getRowHeight();Math.abs(w)>.05&&(w>0?k.scrollUp(R,w*n):0>w&&k.scrollDown(R,-w*n))}},handle_mousewheel:function($){this.$10b($,$.wheelDelta/40)},handle_DOMMouseScroll:function(D){this.$10b(D,-D.detail)},$44b:function(p){this.getView().contains(p.target)||this.$11b.hide()},$41b:function(L){this.$11b.show(L)},$4b:function(Z,x){var o=this.$11b;if(x=x||o._items,x&&x.length&&Z.keyCode){var E=[Z.keyCode];Z.shiftKey&&E.push(16),Z.ctrlKey&&E.push(17),Z.altKey&&E.push(18),/mac/.test(f.navigator?f.navigator.userAgent.toLowerCase():"")?Z.metaKey&&E.push(17):Z.metaKey&&E.push(91),E.sort();var H=E.join(),O=o.$17b(x,function(x){if(x.key){var h=x.key.slice(0);return h.sort(),H===h.join()}});if(O){O.preventDefault!==!1&&Z.preventDefault();var a=!1;O.disabled instanceof Function?a=O.disabled.call(o,O):O.disabled===!0&&(a=!0),a||o.$1b(O,Z)}}},$39b:function(L){var C=this,B=j(L);C.$32b={x:B.pageX,y:B.pageY}},$38b:function(U){var I=this,Q=j(U);I.$31b={x:Q.pageX,y:Q.pageY},I.$33b=i(function(){I.$31b&&(I.$32b?T(I.$31b,I.$32b)<10&&I.$11b.show(U):I.$11b.show(U)),delete I.$33b,delete I.$31b,delete I.$32b},600)},$40b:function(){var b=this;b.$33b!=d&&(m(b.$33b),delete b.$33b,delete b.$31b,delete b.$32b)}}),N.widget.ContextMenu=function(a){var q=this,w=q._view=g.createView(null,q);w[B]="ht-widget-contextmenu",q.setItems(a),q.$13b=new H(q),O(w,"font",t.contextMenuLabelFont),O(w,C,$),O(w,"cursor","default"),O(w,"-webkit-"+P,M),O(w,"-moz-"+P,M),O(w,"-ms-"+P,M),O(w,P,M),O(w,"box-sizing","border-box"),O(w,"-moz-box-sizing","border-box"),t.baseZIndex!=d&&O(w,"z-index",p(t.baseZIndex)+2+""),q.$3b=function(H){q.$13b.$4b(H)}},V("ContextMenu",b,{$5b:0,_items:d,$21b:d,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var t=this,n=t._enableGlobalKey;n===!1&&(s(Y(),"keydown",t.$3b),t._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,q(Y(),"keydown",this.$3b)},setItems:function(n){this._items=n},getItems:function(){return this._items},setVisibleFunc:function(f){this.$16b=f},setLabelMaxWidth:function(H){this.$43b=H},$1b:function(I,l){var S=this;if("check"===I.type)I.selected=!I.selected;else if("radio"===I.type){var T=I.groupId;S.$17b(S._items,function(n){n.groupId===T&&(n.selected=!1)}),I.selected=!0}if(S.hide(),I.action)I.action.apply(I.scope||S,[I,l]);else if(I.href){var o=I.linkTarget||"_self";f.open(I.href,o)}},getItemById:function(a){return this.getItemByProperty("id",a)},setItemVisible:function(n,e){var c=this.getItemById(n);c&&(c.visible=e)},getItemByProperty:function(S,U,l){var A=this;if(l=l||A._items,!l||0===l.length)return d;var m=A.$17b(l,function(q){return q[S]===U});return m||d},scrollUp:function(D,x){var J=this;if(x=x==d?20:x,x=p(x),0!==x){var Q=0;D.$18b>x&&(Q=D.$18b-x),J.$42b(D,Q),D.scrollTop=Q,D.$18b=Q}},scrollDown:function(f,T){var z=this;if(T=T==d?20:T,T=p(T),0!==T){var m=f.$22b,l=f.$23b,J=m-l;l+f.$18b+T<m&&(J=f.$18b+T),z.$42b(f,J),f.scrollTop=J,f.$18b=J}},$42b:function(X,l){l=l==d?X.$18b:l;var w=X.$24b,D=X.$25b;w&&(O(w,"top",l+z),0==l?O(w,W,M):O(w,W,"block")),D&&(O(D,"bottom",-l+z),l==X.$22b-X.$23b?O(D,W,M):O(D,W,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(F,z){for(var v=0;v<F.length;v++){var g=F[v];if(z(g))return g;if(g.items){var s=this.$17b(g.items,z);if(s)return s}}},$2b:function(m,l){for(var Y=this,M=0;M<m.length;M++){Y.$5b++;var I=m[M];if(I.visible!==!1&&!(t.isFunction(I.visible)&&I.visible()===!1||Y.$16b&&!Y.$16b.call(Y,I))){var A=_("li"),T=Y.$5b+"";if(O(A,"white-space","nowrap"),O(A,W,"block"),"separator"===I||I.separator===!0){var U=J();U[B]="separator",O(U,c,t.contextMenuSeparatorWidth+z),O(U,"background",t.contextMenuSeparatorColor),y(A,U)}else{I._id=T,A.setAttribute("data-id",T);var H=_("span"),E=_("span"),j=o(),f=J();if(O(H,W,"inline-block"),O(H,c,"1.2em"),O(E,W,"inline-block"),O(E,c,"1.2em"),O(E,"line-height","1.2em"),j[B]="prefix",O(j,W,"inline-block"),O(j,Q,"1em"),O(j,c,"1em"),O(j,"vertical-align","middle"),O(j,r,"0 0.2em"),"check"===I.type&&I.selected?j[B]+=" check-prefix":"radio"===I.type&&I.selected&&(j[B]+=" radio-prefix"),y(A,j),I.icon){var K=o();K[B]="contextmenu-item-icon",O(K,W,"inline-block"),O(K,c,"1.2em"),O(K,Q,"1.2em"),O(K,"margin-right","0.2em"),O(K,"float","left"),K.$50b=I.icon,K._item=I,y(H,K)}if(E[w]=I.label,y(H,E),y(A,H),f[B]="suffix",O(f,W,"inline-block"),O(f,"margin-left","1em"),O(f,"margin-right","0.4em"),O(f,"text-align","right"),O(f,"font-size","75%"),I.items&&(f[w]=t.contextMenuSubmenuMark),I.suffix&&(f[w]=I.suffix),y(A,f),A[B]="menu-item menu-item"+T,null!=I.background?I.background instanceof Function?O(A,"background-color",I.background.call(Y,I)):O(A,"background-color",I.background):O(A,"background-color",t.contextMenuBackground),O(A,"color",t.contextMenuLabelColor),O(A,S,"3px 0"),I.disabled instanceof Function){var g=I.disabled.call(Y,I);g&&(A[B]+=" disabled",O(A,"color",t.contextMenuDisabledLabelColor))}else I.disabled&&(A[B]+=" disabled",O(A,"color",t.contextMenuDisabledLabelColor));if(I.items){Y.$21b||(Y.$21b=new N.List);var G=_("ul");G[B]="submenu"+T,G.$45b=T,O(G,D,"hidden"),O(G,C,$),y(Y._view,G),Y.$21b.add(G),Y.$2b(I.items,G)}}y(l,A)}}},rebuild:function(){var I=this,M=I._items,p=I._view;if(p&&(p[w]="",I.$21b=d,I.$5b=0,I.$19b=d,I.$20b=d,p.$26b=d,M&&0!==M.length)){var z=_("ul",I._r);y(p,z),I.$2b(M,z)}},addTo:function(r){if(r){var O=this,i=O.$13b;if(O.$12b=r,O.$9b=function(f){i.$44b(f)},O.$27b=function(n){i.$41b(n)},n){var Z=O.$6b=function(H){i.$38b(H)},T=O.$7b=function(w){i.$39b(w)},k=O.$8b=function(k){i.$40b(k)};s(r,"touchstart",Z,!0),s(r,"touchmove",T),s(r,"touchend",k)}else s(r,"contextmenu",O.$27b)}},showOnView:function(J,$,z){J=J.getView?J.getView():J;var i=t.getWindowInfo(),c=J.getBoundingClientRect();this.show(c.left+i.left+$,c.top+i.top+z)},show:function(A,V,_){var l=this,_=_==d?!0:!1,x=l._view;if(x){if(l.invalidate(),1===arguments.length){var a=A;if(n){var e=j(a);A=e.pageX,V=e.pageY}else A=a.pageX,V=a.pageY}var S=t.getWindowInfo(),r=S.width,g=S.height,k=S.left,p=S.top,i={pageX:A,pageY:V,clientX:A-k,clientY:V-p,target:1,originEvent:a},u=i.clientX,R=i.clientY,P=function(Y){Y.style.height=g-6+z;var s=J(),m=J(),c=function(l){O(l,C,$),O(l,"text-align","center"),O(l,Q,"100%"),O(l,"font-size",10+z),O(l,"padding","2px 0"),O(l,"border","0px solid "+t.contextMenuScrollerBorderColor),O(l,"background-color",t.contextMenuScrollerColor1),l.style.backgroundImage="-webkit-linear-gradient(top, "+t.contextMenuScrollerColor1+", "+t.contextMenuScrollerColor2+")",l.style.backgroundImage="linear-gradient(to bottom, "+t.contextMenuScrollerColor1+", "+t.contextMenuScrollerColor2+")"};s[B]="menu-arrow-item menu-arrow-item-top",m[B]="menu-arrow-item menu-arrow-item-bottom",c(s),O(s,"top",L),O(s,"left",L),O(s,"border-bottom-width",1+z),s[w]="▲",c(m),O(m,"bottom",L),O(m,"left",L),O(m,"border-top-width",1+z),m[w]="▼",Y.$24b=s,Y.$25b=m,Y.$18b=Y.scrollTop,Y.$22b=Y.scrollHeight,Y.$23b=Y.clientHeight,y(Y,s),y(Y,m),l.$42b(Y)};l.beforeShow&&l.beforeShow(i);var X=l._items;if(X&&(a&&a.preventDefault(),X.length)){l.rebuild(),t.appendToScreen(x),x.$26b=G(x,".menu-item");var c=x.children[0];c.offsetHeight>g&&P(c);var D=R+(_?1:0),m=u+(_?1:0),K=function(Y){for(var K=0,B=0,q=0,X=l.$43b;q<Y.children.length;q++){var f=Y.children[q];if(f.getAttribute("data-id")){var v=f.children[1],j=f.children[2],k=v.children;if(X){var F=k[0];k.length>1&&(F=k[1]),F.offsetWidth>X&&(F[w]="<marquee scrollamount='3'>"+F[w]+"</marquee>",F.children[0].style.verticalAlign="text-bottom",O(F,Q,X+z),O(F,W,"inline-block"))}var e=v.offsetWidth,c=j.offsetWidth;e>K&&(K=e),c>B&&(B=c)}}for(q=0;q<Y.children.length;q++){var f=Y.children[q];if(f.getAttribute("data-id")){var v=f.children[1],j=f.children[2],C=v.children[0],x=v.children[1];!x&&C.style.width&&O(C,Q,K+z),O(v,Q,K+z),O(j,Q,B+z)}}};K(c);var I=R+3+x.offsetHeight,M=u+3+x.offsetWidth;I>g?O(x,h,D-(I-g)+p+z):O(x,h,D+p+z),M>r?O(x,E,m-(M-r)+k+z):O(x,E,m+k+z);var N=l.$21b;N&&N.each(function(G){K(G),G.offsetHeight>g&&P(G)}),l.$9b&&s(Y(),n?"touchstart":"mousedown",l.$9b,!0),l.afterShow&&l.afterShow(i),l.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=d:!1},getRelatedView:function(){return this.$12b},hide:function(){var I=this,e=I._view;e&&e.parentNode&&(l(e.parentNode,e),q(Y(),n?"touchstart":"mousedown",I.$9b,!0),I.afterHide&&I.afterHide())},dispose:function(){var E=this,Y=E.$12b,v=E._view;v&&(v.parentNode&&l(v.parentNode,v),E.disableGlobalKey(),Y&&(n?(q(Y,"touchstart",E.$6b,!0),q(Y,"touchmove",E.$7b),q(Y,"touchend",E.$8b)):q(Y,"contextmenu",E.$27b)),E._view=E._items=E.$21b=E.$19b=E.$12b=E.beforeShow=E.afterShow=E.afterHide=E.$9b=E.$3b=E.$6b=E.$7b=E.$8b=E.$27b=d)},$46b:function(r,n,a,U,h){var A=g.initContext(r);g.translateAndScale(A,0,0,1),A.clearRect(0,0,a,U),t.drawStretchImage(A,t.getImage(n),"fill",0,0,a,U,h,this),A.restore()},$47b:function(){var T,d,y,x=this,t=x._view;if(x.isShowing()){var f=G(t,".check-prefix");for(y=0;y<f.length;y++){var C=f[y];T=C.clientWidth,d=C.clientHeight,C.$48b=T,C.$49b=d,g.setCanvas(C,T,d)}var Y=G(t,".radio-prefix");for(y=0;y<Y.length;y++){var j=Y[y];T=j.clientWidth,d=j.clientHeight,j.$48b=T,j.$49b=d,g.setCanvas(j,T,d)}var S=G(t,".contextmenu-item-icon");for(y=0;y<S.length;y++){var $=S[y];T=$.clientWidth,d=$.clientHeight,$.$48b=T,$.$49b=d,g.setCanvas($,T,d)}}},validateImpl:function(){var s,u,j,Q=this,$=Q._view;if(Q.isShowing()){var J=G($,".check-prefix");for(j=0;j<J.length;j++){var I=J[j];s=I.$48b,u=I.$49b,s&&u&&Q.$46b(I,t.contextMenuCheckIcon,s,u)}var i=G($,".radio-prefix");for(j=0;j<i.length;j++){var x=i[j];s=x.$48b,u=x.$49b,s&&u&&Q.$46b(x,t.contextMenuRadioIcon,s,u)}var Z=G($,".contextmenu-item-icon");for(j=0;j<Z.length;j++){var L=Z[j];s=L.$48b,u=L.$49b,s&&u&&Q.$46b(L,t.getImage(L.$50b),s,u,L._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);