!function(k,o,J){"use strict";var B="px",j="0",S="innerHTML",w="className",Q=ht.Default,U=ht.Color,e=ht.Node,y="position",v="top",I="left",W=Q.animate,f=Q.getInternal(),Y="width",j="0",t="none",A="max-height",s="font",F="background",L="border-box",g="user-select",m="box-sizing",E="overflow",b=Q.isTouchable,V=Q.isTouchEvent,f=Q.getInternal(),n=U.titleIconBackground,c=Q.scrollBarInteractiveSize,$=/msie 9/.test(k.navigator?k.navigator.userAgent.toLowerCase():""),M=null,q=function(){return document},d=function(A){return q().createElement(A)},O=function(){return d("div")},p=function(){var H=O(),D=H.style;return D.msTouchAction=t,D.cursor="default",b&&D.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",M),D.position="absolute",D.left=j,D.top=j,H},_=function(){return d("canvas")},H=function(){return document.body},T=function(r,b,N){r.style.setProperty(b,N,M)},C=function(A,F){A.style.removeProperty(F)},z=function(B,Z,Y){Q.def(ht.widget[B],Z,Y)},r=function(Z,e){Z.appendChild(e)},R=function(Y,J){Y.removeChild(J)},X=f.addEventListener;f.removeEventListener,f.addMethod(Q,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:n,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:n}]},paletteTitleLabelColor:Q.labelSelectColor,paletteTitleLabelFont:Q.labelFont,paletteContentLabelFont:Q.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:Q.widgetTitleHeight,paletteTitleBackground:U.titleBackground,paletteTitleHoverBackground:U.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:J,paletteItemHoverBorderColor:U.highlight,paletteItemSelectBackground:U.highlight},!0);var G=".palette-item:hover{border: 1px solid "+Q.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+Q.paletteTitleHoverBackground+" !important}",h=document.createElement("style");b||(h.styleSheet?h.styleSheet.cssText=G:h.appendChild(q().createTextNode(G))),q().getElementsByTagName("head")[0].appendChild(h);var K=function(v){var w=this;w.$22h=v,w.addListeners()};Q.def(K,o,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var E=this;E.$36h&&H().removeChild(E.$36h),E.$23h=E.$24h=E.$25h=E.$35h=E.$36h=M},handle_touchstart:function(J){for(var t,z=this,r=z.$22h,S=J.target,O=r.sm(),P=r.dm(),c="palette-header",R="palette-header-tool",X="palette-item",v=!1,E=!1,W=!1;S&&(S[w]||"").indexOf(c)<0&&(S[w]||"").indexOf(X)<0;)S=S.parentNode;if(S&&S[w].indexOf(R)>=0?v=!0:S&&S[w].indexOf(c)>=0?W=!0:S&&S[w].indexOf(X)>=0&&(E=!0),Q.isLeftButton(J))if(z.$27h(J))z.$24h=Q.getClientPoint(J),z.$25h=r.ty();else if(v){Q.preventDefault(J),t=S.parentNode.$11h;var m=P.getDataById(t),n=m.s("tools")[S.toolIndex];n.action&&n.action.call(r)}else if(W){Q.preventDefault(J),t=S.$11h;var m=P.getDataById(t);m.isExpanded()?m.setExpanded(!1):m.setExpanded(!0)}else if(E){t=S.$11h;var i=P.getDataById(t);O.ss(i),r.handleDragAndDrop&&(Q.preventDefault(J),i.s("draggable")&&(r.handleDragAndDrop(J,"prepare"),z.$35h=0)),i.s("draggable")||(Q.preventDefault(J),z.$24h=Q.getClientPoint(J),z.$25h=r.ty())}else Q.preventDefault(J),z.$24h=Q.getClientPoint(J),z.$25h=r.ty();else z.$26h(J)},handle_mousedown:function(e){this.handle_touchstart(e)},handle_mousewheel:function(W){this.handleScroll(W,W.wheelDelta/40,W.wheelDelta!==W.wheelDeltaX)},handle_DOMMouseScroll:function(K){this.handleScroll(K,-K.detail,1)},handleScroll:function(q,d,T){var U=this.$22h;Q.preventDefault(q),T&&U._41o()&&U.ty(U.ty()+20*d)},handle_mouseup:function(E){this.handle_touchend(E)},handle_touchend:function(G){var M=this;M.$37h(G),M.$26h(G)},handleWindowMouseUp:function(V){this.handleWindowTouchEnd(V)},handleWindowTouchEnd:function(Q){var e=this;e.$37h(Q),e.$26h(Q)},$37h:function(G){var T=this,V=T.$22h;2===T.$35h&&(T.$35h=3,V.handleDragAndDrop(G,"end"))},handleWindowMouseMove:function(f){this.handleWindowTouchMove(f)},handleWindowTouchMove:function(k){var Z=this,v=Z.$22h,S=Z.$23h,$=Z.$24h,i=Z.$25h,F=Q.getClientPoint(k),w=v._29I,z=Z.$36h;if(1===Z.$35h||2===Z.$35h){if(Z.$35h=2,v.handleDragAndDrop(k,"between"),V(k)){var E=k.touches[0];k=E?E:k.changedTouches[0]}z.style.left=k.pageX-parseInt(z.width)/2+B,z.style.top=k.pageY-parseInt(z.height)/2+B}else"p"===S?v.ty(i+F.y-$.y):"v"===S&&v.ty(i+($.y-F.y)/w.height*v._59I)},handle_mousemove:function(E){this.handle_touchmove(E)},handle_touchmove:function(E){if(!Q.isDragging()&&Q.isLeftButton(E)){var Y=this,I=Y.$22h,z=Y.$27h(E);if(Y.$24h){if(!Y.$23h){if(Q.getDistance(Q.getClientPoint(E),Y.$24h)<2)return;Y.$23h=z?"v":"p",Q.startDragging(Y,E)}}else if(z)I._43o();else if(0===Y.$35h){if(Y.$35h=1,I.handleDragAndDrop(E,"begin"),Q.startDragging(Y,E),V(E)){var R=E.touches[0];E=R?R:E.changedTouches[0]}var o=Y.$36h=new Image,g=I.$10h[I.sm().ld().getId()].querySelector(".image-box"),h=parseInt(g.style.width),s=parseInt(g.style.height);o.draggable=!1,o.src=g.toDataURL(),o.width=h,o.height=s,o.style.position="absolute",o.style.left=E.pageX-h/2+B,o.style.top=E.pageY-s/2+B,H().appendChild(o)}}},$27h:function($){var j=this.$22h,A=j.getView(),r=A.getBoundingClientRect(),f=j._29I,M=$.clientX-r.left+A.scrollLeft;return j._41o()&&f.x+f.width-M<c}}),ht.widget.Palette=function(i){var o=this,N=o._view=f.createView(null,o);o.$9h={},o.$10h={},o.$4h={},o._29I={x:0,y:0,width:0,height:0},o._59I=0,o.dm(i?i:new ht.DataModel),N[w]="ht-widget-palette",o.$29h=new K(o),T(N,F,Q.paletteContentBackground),T(N,E,"auto"),T(N,m,L),T(N,"-moz-"+m,L),T(N,"-webkit-"+g,t),T(N,"-moz-"+g,t),T(N,"-ms-"+g,t),T(N,g,t),T(N,"position","absolute"),T(N,"overflow","hidden"),r(N,o._79O=p()),X(N,"dragstart",function(D){D.dataTransfer&&(D.dataTransfer.setData("Text","nodeid:"+D.target.$11h),D.dataTransfer.effectAllowed="all",o.$29h.$26h())})},z("Palette",o,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:Q.autoHideScrollBar,_scrollBarSize:Q.scrollBarSize,_scrollBarColor:Q.scrollBarColor,getViewRect:function(){return this._29I},ty:function(B){return B==M?this.getTranslateY():(this.setTranslateY(B),void 0)},setTranslateY:function(B){if(this.$32h==M){var i=this,W=i.$33h(B),I=i.$30h;i.$30h=W,i.fp("translateY",I,W)}},getTranslateY:function(){return this.$30h},setLayout:function(Y){var P,T,O=this,k=O._layout;O._layout=Y,"smallicons"===Y?P=T=20:"iconsonly"===Y?P=T=50:(P=70,T=50),O.setItemImageWidth(P),O.setItemImageHeight(T),O.setItemImagePadding(4),O.fp("layout",k,Y)},getDataAt:function(g){for(var U=g.target;U&&U.$11h==M;)U=U.parentNode;return U&&U.$11h!=M?this.getDataModel().getDataById(U.$11h):void 0},$20h:function(){var $=16;return b&&($*=1.2),$},$19h:function(){return Q.paletteTitleHeight},$18h:function(){var K=Q.paletteSeparatorWidth,p=Q.paletteTitleBackground,t=Q.paletteSeparatorColor||Q.brighter(p);return K+B+" solid "+t},$17h:function(e){T(e,"cursor","pointer"),T(e,"display","inline-block"),T(e,"margin-right",(b?8:4)+B),T(e,"vertical-align",v)},$1h:function(o){var l=this,t=O(),J=O(),b=d("span");t[w]="palette-header",T(t,y,"relative"),T(t,F,Q.paletteTitleBackground),T(t,"color",Q.paletteTitleLabelColor),T(t,v,j),T(t,m,L),T(t,"-moz-"+m,L),T(t,"padding","0 5px 0 0"),T(t,"border-top",l.$18h()),T(t,Y,"100%"),T(t,"cursor","pointer"),T(t,"white-space","nowrap"),T(t,E,"hidden"),T(t,s,Q.paletteTitleLabelFont),T(t,"line-height",l.$19h()+B),t.$11h=o.getId();var k=_(),i=l.$19h(),U=l.$20h();l.$17h(k),f.setCanvas(k,U,i),r(t,k);var H=o.s("tools");if(H)for(var D=0;D<H.length;D++){var q=_();l.$17h(q),f.setCanvas(q,U,i),q[w]="palette-header-tool palette-header-tool"+o.getId()+"-"+D,q.style.position="absolute",q.style.right=(U+10)*D+"px",q.toolIndex=D,r(t,q)}return k[w]="palette-toggle-icon-"+o.getId(),J[w]="palette-content",T(J,"max-height",0+B),T(J,s,Q.paletteContentLabelFont),T(J,E,"hidden"),J.$11h=o.getId(),l.$9h[o.getId()]=J,b[S]=o.getName(),T(b,s,Q.paletteTitleLabelFont),r(t,k),r(t,b),[t,J]},$2h:function(o){var x=this,L=x._layout,g=$&&o.s("draggable")?d("a"):O(),b=_(),X=O(),D=o.getName()||"",F=o.s("title")||o.getToolTip()||D,c=x._itemMargin;b[w]="image-box";var z=x.getItemImageWidth(),n=x.getItemImageHeight();return f.setCanvas(b,z,n),r(g,b),X[S]=D,X[w]="label-box","iconsonly"!==L&&r(g,X),g[w]="palette-item",T(g,"vertical-align",v),T(g,"cursor","pointer"),T(g,"border-radius",5+B),T(g,"border","1px solid transparent"),T(g,"text-align","center"),T(g,"display","inline-block"),T(g,"margin-left",c+B),T(g,"margin-top",c+B),T(g,"color",Q.paletteContentLabelColor),"smallicons"===L?(T(b,"vertical-align","middle"),T(g,"margin-left",2+B),T(g,"margin-top",2+B),T(g,"padding",2+B),T(g,"text-align",I),T(X,"display","inline-block"),T(X,"min-width",x.$21h+x._itemMargin+B)):"largeicons"===L&&(T(X,"max-width",z+B),T(X,"overflow","hidden")),g.$11h=o.getId(),F&&(g.title=F),o.s("draggable")&&!x.handleDragAndDrop&&($?(g.href="#",T(g,"text-decoration",t)):g.draggable="true"),g},$16h:function(J,e,B,z){var b=f.initContext(J);f.translateAndScale(b,0,0,1),b.clearRect(0,0,B,B);var N=(B-z)/2;Q.drawStretchImage(b,Q.getImage(e),"fill",0,N,z,z),b.restore()},$15h:function(N){var Z=this,K=N.getId(),y=Z._view.querySelector(".palette-toggle-icon-"+K),e=N.isExpanded()?Q.paletteCollapseIcon:Q.paletteExpandIcon;if(y&&e){var E=Z.$19h(),P=Z.$20h();Z.$16h(y,e,E,P)}},_drawToolsIcon:function(q){var a=this,C=q.s("tools");if(C)for(var J=0;J<C.length;J++){var w=a._view.querySelector(".palette-header-tool"+q.getId()+"-"+J),z=C[J].icon,N=a.$19h(),V=a.$20h();a.$16h(w,z,N,V)}},$14h:function(P){var T=this,g=P.getId(),U=T.$10h[g].querySelector(".image-box"),q=P.getImage(),R=P.s("image.stretch");if(U&&q){var x=f.initContext(U),i=T.getItemImagePadding();i="smallicons"===T._layout?i/2:i;var a=T.getItemImageWidth()-2*i,O=T.getItemImageHeight()-2*i;f.translateAndScale(x,0,0,1),x.clearRect(0,0,a,O),Q.drawStretchImage(x,Q.getImage(q),R,i,i,a,O,P,T,T.getBodyColor(P)),x.restore()}},validateImpl:function(){var K,U,h,t=this,J=t.$9h,s=t._layout,z=t.$10h,x=t.$4h,y=t._view,u=t.dm();if(t.$13h&&(delete t.$13h,x={},u.each(function(s){x[s.getId()]=s})),"smallicons"===s)for(var $ in x){var L=x[$];if(L instanceof e){var E=L.getName()||"",T=Q.getTextSize(Q.paletteContentLabelFont,E).width;t.$21h!=M&&t.$21h>T||(t.$21h=T)}}for(var $ in x){h=x[$];var Y,Z;if(u.contains(h)){if(h instanceof ht.Group){var k,V=t.$1h(h),f=z[h.getId()];f&&(k=f.nextSibling,R(y,k),R(y,f)),U=u.getSiblings(h).indexOf(h);var G=y.children[2*U]||t._79O;G&&G.parentNode?(y.insertBefore(V[0],G),y.insertBefore(k||V[1],G)):(y.appendChild(V[0]),y.appendChild(k||V[1])),z[h.getId()]=V[0],K=J[h.getId()]=k||V[1],Z=h.$12h;var _=h.s("promptText");Z||(h.$12h=d("div"),h.$12h[S]=_||"",Z=h.$12h),0===h.getChildren().size()?K.contains(Z)||r(K,Z):K.contains(Z)&&R(K,Z)}else if(Y=h.getParent()){var I=t.$2h(h),b=z[h.getId()];K=J[Y.getId()],b&&R(b.parentNode,b),U=u.getSiblings(h).indexOf(h);var O=K.children[U];O?K.insertBefore(I,O):r(K,I),z[h.getId()]=I,t.$14h(h)}}else{var l=z[h.getId()],i=l.parentNode;if(h instanceof ht.Group){var w=l.nextSibling;R(y,l),R(y,w),delete J[h.getId()]}else R(i,l),0===i.children.length&&(Y=u.getDataById(i.$11h),Y&&(Z=Y.$12h,Z&&!i.contains(Z)&&r(i,Z)));delete z[h.getId()]}}t.$4h={};var p=function(){var D=t._59I,I=0;t.$32h!=M&&(clearInterval(t.$32h),I=0,delete t.$32h),t.$32h=setInterval(function(){t.$31h(),D===t._59I?(I++,I>=2&&(clearInterval(t.$32h),delete t.$32h)):(I=0,D=t._59I)},30)};for(var H in J)if(K=J[H],h=u.getDataById(J[H].$11h),t.$15h(h),t._drawToolsIcon(h),h.isExpanded()){if(K.style.maxHeight===0+B){var m=K.scrollHeight+t._itemMargin+B;W(K).duration(200).set(A,m).set("padding-bottom",t._itemMargin+B).end(function(){return function(){p()}}(m))}else K.style.maxHeight=K.scrollHeight+B;K.style.paddingBottom=t._itemMargin+B}else K.style.maxHeight!==0+B&&W(K).duration(200).set(A,j).set("padding-bottom",j).end(function(){return function(){p()}}(K));t.$28h(),t.$31h()},$31h:function(){for(var s=this,Y=s._view,f=0,d=Y.children,N=0;N<d.length;N++){var w=d[N];w.className&&w.className.indexOf("palette-")>=0&&(f+=w.offsetHeight)}s._59I=f,s.$30h=s.$33h(s.ty());var W=s.ty();Y.scrollTop=-W,s._29I={x:0,y:-W,width:Y.clientWidth,height:Y.clientHeight},T(s._79O,v,-W+B),s._93I()},$33h:function(u){var w=this,n=w._29I.height-w._59I;return n>u&&(u=n),u>0?0:Math.round(u)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(B){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(B.property)<0&&this.redraw(),"translateY"===B.property&&(this.iv(),this._43o())},findDataByName:function(C){for(var n=this.dm().getDatas(),s=0;s<n.size();s++){var P=n.get(s);if(P.getName()===C)return P}},setDataModel:function(L){var H=this,Q=H._dataModel,v=H._selectionModel;Q!==L&&(Q&&(Q.umm(H.$6h,H),Q.umd(H.$8h,H),Q.umh(H.$7h,H),v||Q.sm().ums(H.$28h,H)),H._dataModel=L,L.mm(H.$6h,H),L.md(H.$8h,H),L.mh(H.$7h,H),v?v._21I(L):L.sm().ms(H.$28h,H),H.sm().setSelectionMode("single"),H.fp("dataModel",Q,L))},$6h:function(n){var $=this,v=$._view,D=n.data,Z=$.$4h;"add"===n.kind?Z[D.getId()]=D:"remove"===n.kind?Z[D.getId()]=D:"clear"===n.kind&&($.$10h={},$.$9h={},$.$4h={},v[S]=""),$.iv()},$7h:function(P){var j=this,M=P.data;j.$4h[M.getId()]=M,j.iv()},$8h:function(L){var I=this,D=L.data,$=L.property;"expanded"===$?I.iv():(I.$4h[D.getId()]=D,I.iv())},$28h:function(){var t,j=this,S=j.sm(),V="palette-item",f=S.ld();this.dm().each(function(s){t=j.$10h[s.getId()],t&&t[w].indexOf(V)>=0&&(s===f?T(t,F,Q.paletteItemSelectBackground):C(t,F))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);