!function(I){"use strict";var o="ht",N=I[o],s=Math,j=s.max,t=s.min,L=s.abs,x=s.atan2,C=(s.cos,s.sin,s.ceil),m=N.Default,d=m.getInternal(),q=N.List,Z=d.Mat,U=d.getNodeRect,w=d.intersectionLineRect,P=m.getDistance,b=m.setEdgeType,E="left",F="right",_="top",g="bottom",K="edge.type",f="edge.gap",T="edge.center",S="edge.extend",l=function(T,j){return U(T,j).width},X=function(w,h){return U(w,h).height},k=function(C,z){return d.getEdgeHostPosition(C,z,"source")},D=function(u,P){return d.getEdgeHostPosition(u,P,"target")},v=function(P,O){var j=P.s(K),B=P.getEdgeGroup();if(B){var i=0;if(B.eachSiblingEdge(function(Z){O.isVisible(Z)&&Z.s(K)==j&&i++}),i>1)return P.s(f)*(i-1)/2}return 0},V=function(P,k){var u=P.s(K),N=P.isLooped();if(!P.getEdgeGroup())return N?P.s(f):0;var l,R=0,y=0,i=0;return P.getEdgeGroup().getSiblings().each(function(O){O.each(function(C){if(C._40I===P._40I&&C.s(K)==u&&k.isVisible(C)){var X=C.s(f);l?(y+=i/2+X/2,i=X):(l=C,i=X),C===P&&(R=y)}})}),N?y-R+i:R-y/2},$=function(T,N){var $=N.s("edge.corner.radius");return m.toRoundedCorner(T,$)};d.addMethod(N.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),b("boundary",function(I,s,f,g){g||(s=-s);var n,m=k(f,I),A=D(f,I),b=U(f,I._40I),d=U(f,I._41I),Q=new Z(x(A.y-m.y,A.x-m.x)),H=P(m,A),V=m.x,z=m.y;return n=Q.tf(0,s),m={x:n.x+V,y:n.y+z},n=Q.tf(H,s),A={x:n.x+V,y:n.y+z},n=w(m,A,b),n&&(m={x:n[0],y:n[1]}),n=w(m,A,d),n&&(A={x:n[0],y:n[1]}),{points:new q([m,A])}}),b("ripple",function(u,e,h,$){$||(e=-e);var R=k(h,u),y=D(h,u),o=P(R,y),F=t(u.s("edge.offset"),o/2),j=u.s("edge.ripple.size"),a=u.s("edge.ripple.length"),O=u.s("edge.ripple.both"),p=u.s(T),V=u.s("edge.ripple.elevation"),M=new q,A=u.s("edge.ripple.straight")?null:new q,r=new Z(x(y.y-R.y,y.x-R.x));$||(V=-V),o-=2*F,a>0&&(j=C(o/a));var H=o/j;A&&A.add(1);for(var E=0;j>E;E++)A&&A.add(3),0===E?M.add({x:F+H*E,y:p?0:e}):M.add({x:F+H*E,y:e}),M.add({x:F+H*E+H/2,y:V+e}),O&&(V=-V);for(M.add({x:F+o,y:p?0:e}),E=0;E<M.size();E++){var c=r.tf(M.get(E));c.x+=R.x,c.y+=R.y,M.set(E,c)}return{points:M,segments:A}}),b("h.v",function(H,p,W){p=V(H,W);var c=new q,m=H.s(T),P=k(W,H),K=P.x,Q=P.y,U=D(W,H),R=U.x,A=U.y,v=H._40I instanceof N.Edge,g=H._41I instanceof N.Edge,S=0,h=0,f=R-K,y=A-Q;return m||(S=v?0:l(W,H._40I)/2,h=g?0:X(W,H._41I)/2),f>=0&&0>=y?(c.add({x:K+S,y:Q+p}),c.add({x:R+p,y:Q+p}),c.add({x:R+p,y:A+h})):0>=f&&y>=0?(c.add({x:K-S,y:Q+p}),c.add({x:R+p,y:Q+p}),c.add({x:R+p,y:A-h})):f>=0&&y>=0?(c.add({x:K+S,y:Q+p}),c.add({x:R-p,y:Q+p}),c.add({x:R-p,y:A-h})):(c.add({x:K-S,y:Q+p}),c.add({x:R-p,y:Q+p}),c.add({x:R-p,y:A+h})),$(c,H)}),b("v.h",function(K,I,j){I=V(K,j);var Q=new q,f=K.s(T),i=k(j,K),R=i.x,E=i.y,r=D(j,K),p=r.x,y=r.y,W=K._40I instanceof N.Edge,H=K._41I instanceof N.Edge,P=0,e=0,z=p-R,O=y-E;return f||(P=H?0:l(j,K._41I)/2,e=W?0:X(j,K._40I)/2),z>=0&&0>=O?(Q.add({x:R+I,y:E-e}),Q.add({x:R+I,y:y+I}),Q.add({x:p-P,y:y+I})):0>=z&&O>=0?(Q.add({x:R+I,y:E+e}),Q.add({x:R+I,y:y+I}),Q.add({x:p+P,y:y+I})):z>=0&&O>=0?(Q.add({x:R-I,y:E+e}),Q.add({x:R-I,y:y+I}),Q.add({x:p-P,y:y+I})):(Q.add({x:R-I,y:E-e}),Q.add({x:R-I,y:y+I}),Q.add({x:p+P,y:y+I})),$(Q,K)}),b("ortho",function(U,r,c){var d=new q,g=U.s(T),h=U.s("edge.ortho"),O=U._40I,G=U._41I,R=k(c,U),W=R.x,M=R.y,C=D(c,U),f=C.x,m=C.y,B=f-W,e=m-M,P=O instanceof N.Edge,Q=G instanceof N.Edge,V=g||P?0:l(c,O)/2,Y=g||P?0:X(c,O)/2,J=g||Q?0:l(c,G)/2,F=g||Q?0:X(c,G)/2,v=(B-(V+J)*(B>0?1:-1))*h,H=(e-(Y+F)*(e>0?1:-1))*h;return L(B)<L(e)?B>=0&&0>=e?(d.add({x:W+r,y:M-Y}),d.add({x:W+r,y:M+H+r-Y}),d.add({x:f+r,y:M+H+r-Y}),d.add({x:f+r,y:m+F})):0>=B&&e>=0?(d.add({x:W+r,y:M+Y}),d.add({x:W+r,y:M+H+r+Y}),d.add({x:f+r,y:M+H+r+Y}),d.add({x:f+r,y:m-F})):B>=0&&e>=0?(d.add({x:W+r,y:M+Y}),d.add({x:W+r,y:M+H-r+Y}),d.add({x:f+r,y:M+H-r+Y}),d.add({x:f+r,y:m-F})):(d.add({x:W+r,y:M-Y}),d.add({x:W+r,y:M+H-r-Y}),d.add({x:f+r,y:M+H-r-Y}),d.add({x:f+r,y:m+F})):B>=0&&0>=e?(d.add({x:W+V,y:M+r}),d.add({x:W+v+r+V,y:M+r}),d.add({x:W+v+r+V,y:m+r}),d.add({x:f-J,y:m+r})):0>=B&&e>=0?(d.add({x:W-V,y:M+r}),d.add({x:W+v+r-V,y:M+r}),d.add({x:W+v+r-V,y:m+r}),d.add({x:f+J,y:m+r})):B>=0&&e>=0?(d.add({x:W+V,y:M+r}),d.add({x:W+v-r+V,y:M+r}),d.add({x:W+v-r+V,y:m+r}),d.add({x:f-J,y:m+r})):(d.add({x:W-V,y:M+r}),d.add({x:W+v-r-V,y:M+r}),d.add({x:W+v-r-V,y:m+r}),d.add({x:f+J,y:m+r})),$(d,U)}),b("flex",function(b,_,a){var V=new q,P=b.s("edge.flex")+v(b,a),U=b.s(T),E=b._40I,A=b._41I,w=k(a,b),t=w.x,h=w.y,g=D(a,b),C=g.x,R=g.y,S=E instanceof N.Edge,B=A instanceof N.Edge,F=C-t,o=R-h,z=U||S?0:l(a,E)/2,Z=U||S?0:X(a,E)/2,s=U||B?0:l(a,A)/2,u=U||B?0:X(a,A)/2,d=F>0?P:-P,j=o>0?P:-P;return L(F)<L(o)?F>=0&&0>=o?(V.add({x:t+_,y:h-Z}),V.add({x:t+_,y:h+j+_-Z}),V.add({x:C+_,y:R-j+_+u}),V.add({x:C+_,y:R+u})):0>=F&&o>=0?(V.add({x:t+_,y:h+Z}),V.add({x:t+_,y:h+j+_+Z}),V.add({x:C+_,y:R-j+_-u}),V.add({x:C+_,y:R-u})):F>=0&&o>=0?(V.add({x:t+_,y:h+Z}),V.add({x:t+_,y:h+j-_+Z}),V.add({x:C+_,y:R-j-_-u}),V.add({x:C+_,y:R-u})):(V.add({x:t+_,y:h-Z}),V.add({x:t+_,y:h+j-_-Z}),V.add({x:C+_,y:R-j-_+u}),V.add({x:C+_,y:R+u})):F>=0&&0>=o?(V.add({x:t+z,y:h+_}),V.add({x:t+d+_+z,y:h+_}),V.add({x:C-d+_-s,y:R+_}),V.add({x:C-s,y:R+_})):0>=F&&o>=0?(V.add({x:t-z,y:h+_}),V.add({x:t+d+_-z,y:h+_}),V.add({x:C-d+_+s,y:R+_}),V.add({x:C+s,y:R+_})):F>=0&&o>=0?(V.add({x:t+z,y:h+_}),V.add({x:t+d-_+z,y:h+_}),V.add({x:C-d-_-s,y:R+_}),V.add({x:C-s,y:R+_})):(V.add({x:t-z,y:h+_}),V.add({x:t+d-_-z,y:h+_}),V.add({x:C-d-_+s,y:R+_}),V.add({x:C+s,y:R+_})),$(V,b)}),b("extend.east",function(J,W,b){var K=new q,s=J.s(S)+v(J,b),V=J.s(T),Z=k(b,J),m=J._40I instanceof N.Edge,d=J._41I instanceof N.Edge,I=Z.x+(V||m?0:l(b,J._40I)/2),z=Z.y,M=D(b,J),U=M.x+(V||d?0:l(b,J._41I)/2),f=M.y,x=j(I,U)+s;return z>f?(K.add({x:I,y:z+W}),K.add({x:x+W,y:z+W}),K.add({x:x+W,y:f-W}),K.add({x:U,y:f-W})):(K.add({x:I,y:z-W}),K.add({x:x+W,y:z-W}),K.add({x:x+W,y:f+W}),K.add({x:U,y:f+W})),$(K,J)}),b("extend.west",function(n,r,p){var x=new q,m=n.s(S)+v(n,p),b=n.s(T),w=n._40I instanceof N.Edge,d=n._41I instanceof N.Edge,H=k(p,n),Q=H.x-(b||w?0:l(p,n._40I)/2),g=H.y,L=D(p,n),Z=L.x-(b||d?0:l(p,n._41I)/2),I=L.y,V=t(Q,Z)-m;return g>I?(x.add({x:Q,y:g+r}),x.add({x:V-r,y:g+r}),x.add({x:V-r,y:I-r}),x.add({x:Z,y:I-r})):(x.add({x:Q,y:g-r}),x.add({x:V-r,y:g-r}),x.add({x:V-r,y:I+r}),x.add({x:Z,y:I+r})),$(x,n)}),b("extend.north",function(G,s,E){var I=new q,Z=G.s(S)+v(G,E),j=G.s(T),y=G._40I instanceof N.Edge,f=G._41I instanceof N.Edge,z=k(E,G),x=z.x,n=z.y-(j||y?0:X(E,G._40I)/2),B=D(E,G),Q=B.x,W=B.y-(j||f?0:X(E,G._41I)/2),P=t(n,W)-Z;return x>Q?(I.add({y:n,x:x+s}),I.add({y:P-s,x:x+s}),I.add({y:P-s,x:Q-s}),I.add({y:W,x:Q-s})):(I.add({y:n,x:x-s}),I.add({y:P-s,x:x-s}),I.add({y:P-s,x:Q+s}),I.add({y:W,x:Q+s})),$(I,G)}),b("extend.south",function(P,l,F){var x=new q,_=P.s(S)+v(P,F),I=P.s(T),c=P._40I instanceof N.Edge,o=P._41I instanceof N.Edge,t=k(F,P),y=t.x,u=t.y+(I||c?0:X(F,P._40I)/2),r=D(F,P),w=r.x,p=r.y+(I||o?0:X(F,P._41I)/2),A=j(u,p)+_;return y>w?(x.add({y:u,x:y+l}),x.add({y:A+l,x:y+l}),x.add({y:A+l,x:w-l}),x.add({y:p,x:w-l})):(x.add({y:u,x:y-l}),x.add({y:A+l,x:y-l}),x.add({y:A+l,x:w+l}),x.add({y:p,x:w+l})),$(x,P)});var R=function(n,r,j,B,s){if(B.sort(function(Z,n){var V=Z.getSourceAgent()===r?Z.getTargetAgent():Z.getSourceAgent(),K=n.getSourceAgent()===r?n.getTargetAgent():n.getSourceAgent(),C=V.p(),y=K.p();if(j===E||j===F){if(C.y>y.y)return 1;if(C.y<y.y)return-1}else{if(C.x>y.x)return 1;if(C.x<y.x)return-1}return m.sortFunc(Z.getId(),n.getId())}),s){for(var v,x,W,o=n.getSourceAgent(),K=n.getTargetAgent(),J=0;J<B.size();J++){var Z=B.get(J);Z.getSourceAgent()===o&&Z.getTargetAgent()===K||Z.getTargetAgent()===o&&Z.getSourceAgent()===K?(x||(x=new q),x.add(Z,0)):x?(W||(W=new q),W.add(Z)):(v||(v=new q),v.add(Z))}B.clear(),v&&B.addAll(v),x&&B.addAll(x),W&&B.addAll(W)}var G=B.indexOf(n),N=B.size(),_=n.s(f);return{side:j,index:G,size:N,offset:-_*(N-1)/2+_*G}},y=function(o,Y,r,J,q){var _=Y.s(K);return R(Y,r,J,r.getAgentEdges().toList(function(V){return o.isVisible(V)&&V.s(K)===_}),q)},p=function(x,I){var f=x.getSourceAgent()===I?x.getTargetAgent():x.getSourceAgent(),i=I.p(),W=f.p(),B=W.x-i.x,c=W.y-i.y;return B>0&&L(c)<=B?F:0>B&&L(c)<=-B?E:c>0&&L(B)<=c?g:_},n=function(L,W,k){var j=W.s(K),x=p(W,k);return R(W,k,x,k.getAgentEdges().toList(function(E){return L.isVisible(E)&&E.s(K)===j&&p(E,k)===x}))},A=function(l,K){var V=l.getSourceAgent()===K,w=V?l.getTargetAgent():l.getSourceAgent(),f=K.p(),r=w.p();return V?f.y>r.y?_:g:f.x<r.x?F:E},a=function(U,o,j){var L=o.s(K),v=A(o,j);return R(o,j,v,j.getAgentEdges().toList(function(H){return U.isVisible(H)&&H.s(K)===L&&A(H,j)===v}),v===F||v===g)},u=function(z,J){var y=z.getSourceAgent()===J,b=y?z.getTargetAgent():z.getSourceAgent(),k=J.p(),K=b.p();return y?k.x<K.x?F:E:k.y>K.y?_:g},O=function(y,Y,T){var N=Y.s(K),E=u(Y,T);return R(Y,T,E,T.getAgentEdges().toList(function(J){return y.isVisible(J)&&J.s(K)===N&&u(J,T)===E}),E===F||E===g)},c=function(s,B,r){var R=s.getSourceAgent(),P=s.getTargetAgent(),A=R.getId()>P.getId(),c=A?P:R,v=A?R:P,x=c.p(),t=v.p(),M=r(B,s,c),k=r(B,s,v),u=s.s(T),J=u?0:l(B,c)/2,I=u?0:l(B,v)/2,j=u?0:X(B,c)/2,H=u?0:X(B,v)/2,y=M.offset,d=k.offset,f=M.side,U=k.side,Z=new q;return f===_?(Z.add({x:x.x+y,y:x.y-j}),Z.add({x:x.x+y,y:t.y+d}),U===E?Z.add({x:t.x-I,y:t.y+d}):Z.add({x:t.x+I,y:t.y+d})):f===g?(Z.add({x:x.x+y,y:x.y+j}),Z.add({x:x.x+y,y:t.y+d}),U===E?Z.add({x:t.x-I,y:t.y+d}):Z.add({x:t.x+I,y:t.y+d})):f===E?(Z.add({x:x.x-J,y:x.y+y}),Z.add({x:t.x+d,y:x.y+y}),U===g?Z.add({x:t.x+d,y:t.y+H}):Z.add({x:t.x+d,y:t.y-H})):f===F&&(Z.add({x:x.x+J,y:x.y+y}),Z.add({x:t.x+d,y:x.y+y}),U===g?Z.add({x:t.x+d,y:t.y+H}):Z.add({x:t.x+d,y:t.y-H})),A&&Z.reverse(),$(Z,s)};b("ortho2",function(f,Z,a){var t,c,J=f.s(T),G=f.s("edge.ortho"),d=f.getSourceAgent(),p=f.getTargetAgent(),H=d.getId()>p.getId(),N=H?p:d,D=H?d:p,B=N.p(),U=D.p(),k=n(a,f,N),I=n(a,f,D),e=J?0:l(a,N)/2,r=J?0:X(a,N)/2,V=J?0:l(a,D)/2,x=J?0:X(a,D)/2,u=new q,W=k.offset,O=I.offset,i=k.side;return i===F?(t=U.y>B.y?-W:W,c=B.x+e+(U.x-V-B.x-e)*G,u.add({x:B.x+e,y:B.y+W}),u.add({x:c+t,y:B.y+W}),u.add({x:c+t,y:U.y+O}),u.add({x:U.x-V,y:U.y+O})):i===E?(t=U.y>B.y?-W:W,c=B.x-e-(B.x-e-U.x-V)*G,u.add({x:B.x-e,y:B.y+W}),u.add({x:c-t,y:B.y+W}),u.add({x:c-t,y:U.y+O}),u.add({x:U.x+V,y:U.y+O})):i===g?(t=U.x>B.x?-W:W,c=B.y+r+(U.y-x-B.y-r)*G,u.add({x:B.x+W,y:B.y+r}),u.add({x:B.x+W,y:c+t}),u.add({x:U.x+O,y:c+t}),u.add({x:U.x+O,y:U.y-x})):i===_&&(t=U.x>B.x?-W:W,c=B.y-r-(B.y-r-U.y-x)*G,u.add({x:B.x+W,y:B.y-r}),u.add({x:B.x+W,y:c-t}),u.add({x:U.x+O,y:c-t}),u.add({x:U.x+O,y:U.y+x})),H&&u.reverse(),$(u,f)},!0),b("flex2",function(k,L,B){var t,m=k.getSourceAgent(),H=k.getTargetAgent(),U=m.getId()>H.getId(),v=U?H:m,r=U?m:H,h=v.p(),Q=r.p(),Y=n(B,k,v),N=n(B,k,r),I=k.s(T),V=k.s("edge.flex")+(Y.size-1)/2*k.s(f),C=I?0:l(B,v)/2,y=I?0:X(B,v)/2,A=I?0:l(B,r)/2,o=I?0:X(B,r)/2,e=new q,Z=Y.offset,s=N.offset,c=Y.side;return c===F?(t=Q.y>h.y?-Z:Z,e.add({x:h.x+C,y:h.y+Z}),e.add({x:h.x+C+V+t,y:h.y+Z}),e.add({x:Q.x-A-V+t,y:Q.y+s}),e.add({x:Q.x-A,y:Q.y+s})):c===E?(t=Q.y>h.y?-Z:Z,e.add({x:h.x-C,y:h.y+Z}),e.add({x:h.x-C-V-t,y:h.y+Z}),e.add({x:Q.x+A+V-t,y:Q.y+s}),e.add({x:Q.x+A,y:Q.y+s})):c===g?(t=Q.x>h.x?-Z:Z,e.add({x:h.x+Z,y:h.y+y}),e.add({x:h.x+Z,y:h.y+y+V+t}),e.add({x:Q.x+s,y:Q.y-o-V+t}),e.add({x:Q.x+s,y:Q.y-o})):c===_&&(t=Q.x>h.x?-Z:Z,e.add({x:h.x+Z,y:h.y-y}),e.add({x:h.x+Z,y:h.y-y-V-t}),e.add({x:Q.x+s,y:Q.y+o+V-t}),e.add({x:Q.x+s,y:Q.y+o})),U&&e.reverse(),$(e,k)},!0),b("extend.north2",function(V,j,Z){var b=V.getSourceAgent(),v=V.getTargetAgent(),K=b.getId()>v.getId(),E=K?v:b,n=K?b:v,B=E.p(),L=n.p(),a=y(Z,V,E,_),i=y(Z,V,n,_,!0),e=V.s(T),l=e?0:X(Z,E)/2,x=e?0:X(Z,n)/2,g=a.offset,p=i.offset,N=V.s(S)+(a.size-1)/2*V.s(f),Q=t(B.y-l,L.y-x)-N+(B.x<L.x?g:-g),m=new q;return m.add({x:B.x+g,y:B.y-l}),m.add({x:B.x+g,y:Q}),m.add({x:L.x+p,y:Q}),m.add({x:L.x+p,y:L.y-x}),K&&m.reverse(),$(m,V)},!0),b("extend.south2",function(b,C,J){var u=b.getSourceAgent(),l=b.getTargetAgent(),E=u.getId()>l.getId(),r=E?l:u,_=E?u:l,d=r.p(),B=_.p(),t=y(J,b,r,g),P=y(J,b,_,g,!0),K=b.s(T),F=K?0:X(J,r)/2,V=K?0:X(J,_)/2,A=t.offset,U=P.offset,D=b.s(S)+(t.size-1)/2*b.s(f),o=j(d.y+F,B.y+V)+D+(d.x>B.x?A:-A),i=new q;return i.add({x:d.x+A,y:d.y+F}),i.add({x:d.x+A,y:o}),i.add({x:B.x+U,y:o}),i.add({x:B.x+U,y:B.y+V}),E&&i.reverse(),$(i,b)},!0),b("extend.west2",function(n,w,N){var u=n.getSourceAgent(),D=n.getTargetAgent(),I=u.getId()>D.getId(),c=I?D:u,J=I?u:D,X=c.p(),R=J.p(),F=y(N,n,c,_),g=y(N,n,J,_,!0),Q=n.s(T),v=Q?0:l(N,c)/2,o=Q?0:l(N,J)/2,p=F.offset,a=g.offset,V=n.s(S)+(F.size-1)/2*n.s(f),P=t(X.x-v,R.x-o)-V+(X.y<R.y?p:-p),E=new q;return E.add({x:X.x-v,y:X.y+p}),E.add({x:P,y:X.y+p}),E.add({x:P,y:R.y+a}),E.add({x:R.x-o,y:R.y+a}),I&&E.reverse(),$(E,n)},!0),b("extend.east2",function(s,F,Q){var R=s.getSourceAgent(),Z=s.getTargetAgent(),V=R.getId()>Z.getId(),x=V?Z:R,e=V?R:Z,K=x.p(),p=e.p(),c=y(Q,s,x,_),m=y(Q,s,e,_,!0),X=s.s(T),Y=X?0:l(Q,x)/2,U=X?0:l(Q,e)/2,A=c.offset,P=m.offset,u=s.s(S)+(c.size-1)/2*s.s(f),J=j(K.x+Y,p.x+U)+u+(K.y>p.y?A:-A),H=new q;return H.add({x:K.x+Y,y:K.y+A}),H.add({x:J,y:K.y+A}),H.add({x:J,y:p.y+P}),H.add({x:p.x+U,y:p.y+P}),V&&H.reverse(),$(H,s)},!0),b("v.h2",function(j,J,N){return c(j,N,a)},!0),b("h.v2",function(R,K,r){return c(R,r,O)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);