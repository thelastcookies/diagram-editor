!function(t,M,A){"use strict";function i(){var J=[],q=[];return function(){return 0===arguments.length?q.join("")+y.apply(String,J):(J.length+arguments.length>1024&&(q.push(y.apply(String,J)),J.length=0),Array.prototype.push.apply(J,arguments),void 0)}}function E(M,r,g,X,F){var u,p,U=8*F-X-1,L=(1<<U)-1,o=L>>1,K=-7,l=g?F-1:0,Z=g?-1:1,A=M[r+l];for(l+=Z,u=A&(1<<-K)-1,A>>=-K,K+=U;K>0;u=256*u+M[r+l],l+=Z,K-=8);for(p=u&(1<<-K)-1,u>>=-K,K+=X;K>0;p=256*p+M[r+l],l+=Z,K-=8);if(0===u)u=1-o;else{if(u===L)return p?0/0:1/0*(A?-1:1);p+=Math.pow(2,X),u-=o}return(A?-1:1)*p*Math.pow(2,u-X)}var n="ht",B=t[n],c=null,j=Math,g=j.abs,p=j.max,I=Number.MAX_VALUE,a=B.Default,q=a.getInternal(),R=a.clone,H=q.vec3TransformMat4,f=[0,0],k=q.appendArray,Z=function(){function U(F,v,s,W){if(F){var y=F[W];if(y){s.ignoreColor||(v.color=y.kd),!s.ignoreTransparent&&y.d>0&&y.d<1&&(v.transparent=!0,v.opacity=y.d);var B;if(!s.ignoreImage&&(B=y.map_kd)){B=B.split(" ");for(var _=-1,c=0;c<B.length;c++)"-o"===B[c]?(v.uvOffset=[parseFloat(B[c+1]),parseFloat(B[c+2])],c+=3,_=c):"-s"===B[c]&&(v.uvScale=[parseFloat(B[c+1]),parseFloat(B[c+2])],c+=3,_=c);v.image=(s.prefix||"")+B.splice(_+1).join(" ")}}}}var G=/v( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,J=/vt( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,v=/vn( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,P=/^[og]\s*(.+)?/,e=function(l,K){return K=parseInt(K),K>=0?l[K-1]:l[K+l.length]},u=function(v,I,o,V,J){if(v.lvs){var O=e(I,V),A=e(I,J),C=o.matrix,Y=v.lvs;C?(k(Y,H(R(O),C)),k(Y,H(R(A),C))):(k(Y,O),k(Y,A))}},Y=function(d,s,$,W,I,q){if(d.vs){var Z=e(s,W),D=e(s,I),X=e(s,q),g=$.matrix,P=d.vs;if($.flipFace){var G=D;D=X,X=G}g?(k(P,H(R(Z),g)),k(P,H(R(D),g)),k(P,H(R(X),g))):(k(P,Z),k(P,D),k(P,X))}},r=function(K,x,r,g,u,Q){if(K.vs){var L=r.flipY,U=g===A?f:e(x,g),s=u===A?f:e(x,u),X=Q===A?f:e(x,Q);if(r.flipFace){var h=s;s=X,X=h}K.uv.push(U[0],L?1-U[1]:U[1],s[0],L?1-s[1]:s[1],X[0],L?1-X[1]:X[1])}},y=function(K,_,s,X,q,Z){if(K.vs){var v=e(_,X),P=e(_,q),G=e(_,Z),y=s.normalMatrix,L=K.ns;if(s.flipFace){var u=P;P=G,G=u}y?(k(L,H(R(v),y)),k(L,H(R(P),y)),k(L,H(R(G),y))):(k(L,v),k(L,P),k(L,G))}},o=function(K,W,r,w){for(var F=w.length-1,t=0;F>t;++t)u(K,W,r,w[t],w[t+1]);u(K,W,r,w[F],w[0])},O=function(e,k,D,u,B,g,E,b){var c=u&&u.length&&b;g[3]===A?(Y(e,k,B,g[0],g[1],g[2]),E?r(e,D,B,E[0],E[1],E[2]):e.uv&&e.uv.length&&r(e,D,B),c&&y(e,u,B,b[0],b[1],b[2])):(Y(e,k,B,g[0],g[1],g[3]),Y(e,k,B,g[1],g[2],g[3]),E?(r(e,D,B,E[0],E[1],E[3]),r(e,D,B,E[1],E[2],E[3])):e.uv&&e.uv.length&&(r(e,D,B),r(e,D,B)),c&&(y(e,u,B,b[0],b[1],b[3]),y(e,u,B,b[1],b[2],b[3])))},h=function($,r,D,t){var j,F,f,P,V,G,w,u,X=I,J=I,d=I,U=-I,R=-I,E=-I;for(j in $)for(G=$[j].vs,u=G.length,F=0;u>F;F+=3)f=G[F+0],P=G[F+1],V=G[F+2],X>f&&(X=f),J>P&&(J=P),d>V&&(d=V),f>U&&(U=f),P>R&&(R=P),V>E&&(E=V);var m;if(D){var O=X+(U-X)/2,K=J+(R-J)/2,z=d+(E-d)/2;for(j in $){for(G=$[j].vs,u=G.length,F=0;u>F;F+=3)G[F+0]-=O,G[F+1]-=K,G[F+2]-=z;if(w=$[j].lvs)for(u=w.length,F=0;u>F;F+=3)w[F+0]-=O,w[F+1]-=K,w[F+2]-=z}m=[O,K,z]}var v,c,A;D?(v=U-X,c=R-J,A=E-d):(v=2*p(g(X),g(U)),c=2*p(g(J),g(R)),A=2*p(g(d),g(E))),0===v&&(v=Math.min(c,A)/1e3||.001),0===c&&(c=Math.min(v,A)/1e3||.001),0===A&&(A=Math.min(v,c)/1e3||.001),t.rawS3=[v,c,A];for(j in $){if(G=$[j].vs,w=$[j].lvs,r){for(u=G.length,F=0;u>F;F+=3)v&&(G[F+0]/=v),c&&(G[F+1]/=c),A&&(G[F+2]/=A);if(w)for(u=w.length,F=0;u>F;F+=3)v&&(w[F+0]/=v),c&&(w[F+1]/=c),A&&(w[F+2]/=A);var o=$[j].ns;if(o){u=o.length;var C=new B.Math.Vector3;for(F=0;u>F;F+=3)C.set(o[F+0]*v,o[F+1]*c,o[F+2]*A).normalize(),o[F+0]=C.x,o[F+1]=C.y,o[F+2]=C.z}}$[j].rawS3=t.rawS3,m&&($[j].center=m)}};return function(R,$,t){if(!R)return c;(q.isString($)||$ instanceof ArrayBuffer)&&($=w($)),t||(t={}),t.flipY==c&&(t.flipY=!0),(t.s3||t.r3||t.t3||t.mat)&&(t.matrix=q.createWorldMatrix(t.mat,t.s3,t.r3,t.rotationMode,t.t3));var Y,H,F,y,N=B.Style["wf.loadQuadWireframe"],b=[],S=[],W=t.ignoreNormal?c:[],E=t.reverseFlipMtls,i={vs:[],uv:[],ns:W?[]:c},D={htdefault:i},p=new l(R),Z="",j="";for(W&&t.matrix&&(t.normalMatrix=q.createNormalMatrix(t.matrix));null!=(H=p.stepNext());)if(H=H.trim(),0!==H.length&&"#"!==H.charAt(0))if(H.indexOf("\\")!==H.length-1){if(Z&&(H=Z+H,Z=""),H.indexOf("#QNAN0")>=0&&(H=H.replace(/#QNAN0/gi,"0")),F=G.exec(H))b.push([parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3])]);else if(F=J.exec(H))S.push([parseFloat(F[1]),parseFloat(F[2])]);else if(W&&(F=v.exec(H)))t.flipFace?W.push([parseFloat(-F[1]),parseFloat(-F[2]),parseFloat(-F[3])]):W.push([parseFloat(F[1]),parseFloat(F[2]),parseFloat(F[3])]);else if("f"===H[0]){var T=H.split(/\s+/);if(T.length<4)continue;var Q,Y,n,z=[],s=[],I=[];for(Y=1,n=T.length;n>Y;Y++)Q=T[Y].split("/"),z.push(parseInt(Q[0],10)),Q.length>1&&Q[1].length>0&&I.push(parseInt(Q[1],10)),Q.length>2&&Q[2].length>0&&s.push(parseInt(Q[2],10));for(Y=0,n=z.length-2;n>Y;Y++)O(i,b,S,W,t,[z[0],z[Y+1],z[Y+2]],I.length?[I[0],I[Y+1],I[Y+2]]:c,s.length?[s[0],s[Y+1],s[Y+2]]:c);N&&o(i,b,t,z)}else if(t.part&&null!==(F=P.exec(H)))j=(" "+F[0].substr(1).trim()).substr(1);else if(/^usemtl /.test(H)){var d=H.substring(7).trim();d.split(" ").forEach(function(f){var R=t.part?j+"_"+f:f;(i=D[R])||(i=D[R]={name:R,vs:[],uv:[],ns:W?[]:c,lvs:N?[]:c},t.ignoreMtls&&t.ignoreMtls.indexOf(f)>=0&&delete i.vs,(t.reverseFlip||"*"===E||E&&E.indexOf(f)>=0)&&(i.reverseFlip=!0),U($,i,t,f))})}}else Z+=H.substring(0,H.length-1);var A=[];for(var V in D){var r=D[V].vs;if(r&&0!==r.length){var m=D[V].uv;if(m)for(var C=2*r.length/3-m.length;C-->0;)m.push(0)}else A.push(V)}A.forEach(function(Z){delete D[Z]}),h(D,t.cube,t.center,t);var K=t.shape3d;if(K){var M=[];for(var y in D){var i=D[y];M.rawS3=i.rawS3,i.center&&(M.center=i.center),M.push(i)}a.setShape3dModel(K,M)}return D}}(),w=function(f){var k={};if(f)for(var x,$,Q,o,M,t,u=new l(f),C=/\s+/;null!=($=u.stepNext());)$=$.trim(),0!==$.length&&"#"!==$.charAt(0)&&(Q=$.indexOf(" "),o=(Q?$.substring(0,Q):$).toLowerCase(),M=(Q?$.substring(Q+1):"").trim(),"newmtl"===o?k[M]=x={name:M}:x&&("ka"===o||"kd"===o||"ks"===o?(t=M.split(C,3),x[o]=[parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]),1]):x[o]="ns"===o||"d"===o?parseFloat(M):M));return k},l=function(T){var Z=this;if(T instanceof ArrayBuffer){Z.isBuffer=!0;var j=0,o=new Uint8Array(T),k=o.length,S=o.length;Z.stepNext=function(){for(var y,t,A=j;k>j;)if(y=o[j],t=y>>4,12===t||13==t)j+=2;else if(14===t)j+=3;else if(j++,10===y)return String.fromCharCode.apply(null,o.subarray(A,j));return j>A?String.fromCharCode.apply(null,o.subarray(A,j)):null}}else{Z.isBuffer=!1;var g=T.split("\n"),$=0,S=g.length;Z.stepNext=function(){return S>$?g[$++]:null}}};l.prototype={},l.prototype.constructor=l,q.addMethod(a,{loadObj:function(U,B,n){n=n||{};var d=!1;/(MSIE |Trident\/|Edge\/)/.test(t.navigator.userAgent)&&(d=!0);var V=function(f){var h,m=n.finishFunc,X=n.shape3d,B=f?Z(f[0],f[1],n):null;if(B){if(X)h=a.getShape3dModel(X);else{h=[];for(var d in B){var H=B[d];h.rawS3=H.rawS3,h.push(H)}}m&&m(B,h,h.rawS3)}else m&&m(null)};if(d){n.responseType="arraybuffer";var _=function(H){a.xhrLoad(U,function(k){V([k,H])},n)};B?a.xhrLoad(B,function(X){_(X)},n):_()}else a.xhrLoad(B?[U,B]:[U],V,n)},parseObj:function(A,o,D){return Z(A,o,D)}});var m=B.ByteBuffer=function(L,t,o){if("undefined"==typeof L&&(L=m.DEFAULT_CAPACITY),"undefined"==typeof t&&(t=m.DEFAULT_ENDIAN),"undefined"==typeof o&&(o=m.DEFAULT_NOASSERT),!o){if(L=0|L,0>L)throw RangeError("Illegal capacity");t=!!t,o=!!o}this.buffer=0===L?U:new ArrayBuffer(L),this.view=0===L?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=L,this.littleEndian=t,this.noAssert=o,this.bufferId=0},U=new ArrayBuffer(0);M.defineProperties(m.prototype,{offset:{get:function(){return this._offset},set:function(B){this._offset=B,B&&B>=this.limit&&this.trySwitchNextBuffer()}}}),m.LITTLE_ENDIAN=!0,m.BIG_ENDIAN=!1,m.DEFAULT_CAPACITY=16,m.DEFAULT_ENDIAN=m.BIG_ENDIAN,m.DEFAULT_NOASSERT=!1,m.METRICS_BYTES="b";var y=String.fromCharCode,J=m.prototype;J.trySwitchNextBuffer=function(){var Z=this.buffers[++this.bufferId];Z&&(this.buffer=Z,this.limit=Z.byteLength,this.offset=0,this.view=Z.byteLength>0?new Uint8Array(Z):null)},J.readUint8=function(C){var V="undefined"==typeof C;if(V&&(C=this.offset),!this.noAssert){if("number"!=typeof C||0!==C%1)throw TypeError("Illegal offset: "+C+" (not an integer)");if(C>>>=0,0>C||C+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+C+" (+"+1+") <= "+this.buffer.byteLength)}var R=this.view[C];return V&&(this.offset+=1),R},J.readUint16=function(A){var C="undefined"==typeof A;if(C&&(A=this.offset),!this.noAssert){if("number"!=typeof A||0!==A%1)throw TypeError("Illegal offset: "+A+" (not an integer)");if(A>>>=0,0>A||A+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+A+" (+"+2+") <= "+this.buffer.byteLength)}var L=0;return this.littleEndian?(L=this.view[A],L|=this.view[A+1]<<8):(L=this.view[A]<<8,L|=this.view[A+1]),C&&(this.offset+=2),L},J.readUint24=function(I){var o="undefined"==typeof I;if(o&&(I=this.offset),!this.noAssert){if("number"!=typeof I||0!==I%1)throw TypeError("Illegal offset: "+I+" (not an integer)");if(I>>>=0,0>I||I+3>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+I+" (+"+4+") <= "+this.buffer.byteLength)}var y=0;return this.littleEndian?(y=this.view[I+2]<<16,y|=this.view[I+1]<<8,y|=this.view[I]):(y=this.view[I+1]<<8,y|=this.view[I+2],y+=this.view[I]<<16>>>0),y|=0,o&&(this.offset+=3),y},J.readUint32=function(c){var t="undefined"==typeof c;if(t&&(c=this.offset),!this.noAssert){if("number"!=typeof c||0!==c%1)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+"+4+") <= "+this.buffer.byteLength)}var b=0;return this.littleEndian?(b=this.view[c+2]<<16,b|=this.view[c+1]<<8,b|=this.view[c],b+=this.view[c+3]<<24>>>0):(b=this.view[c+1]<<16,b|=this.view[c+2]<<8,b|=this.view[c+3],b+=this.view[c]<<24>>>0),t&&(this.offset+=4),b},J.readFloat32=function(L){var F="undefined"==typeof L;if(F&&(L=this.offset),!this.noAssert){if("number"!=typeof L||0!==L%1)throw TypeError("Illegal offset: "+L+" (not an integer)");if(L>>>=0,0>L||L+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+L+" (+"+4+") <= "+this.buffer.byteLength)}var K=E(this.view,L,this.littleEndian,23,4);return F&&(this.offset+=4),K};var _=function(){var n={};return n.MAX_CODEPOINT=1114111,n.decodeUTF8=function(M,b){for(var v,i,$,j,W=function(n){n=n.slice(0,n.indexOf(null));var P=Error(n.toString());throw P.name="TruncatedError",P.bytes=n,P};null!==(v=M());)if(0===(128&v))b(v);else if(192===(224&v))null===(i=M())&&W([v,i]),b((31&v)<<6|63&i);else if(224===(240&v))(null===(i=M())||null===($=M()))&&W([v,i,$]),b((15&v)<<12|(63&i)<<6|63&$);else{if(240!==(248&v))throw RangeError("Illegal starting byte: "+v);(null===(i=M())||null===($=M())||null===(j=M()))&&W([v,i,$,j]),b((7&v)<<18|(63&i)<<12|(63&$)<<6|63&j)}},n.UTF16toUTF8=function(T,o){for(var m,E=null;;){if(null===(m=null!==E?E:T()))break;m>=55296&&57343>=m&&null!==(E=T())&&E>=56320&&57343>=E?(o(1024*(m-55296)+E-56320+65536),E=null):o(m)}null!==E&&o(E)},n.UTF8toUTF16=function(Q,V){var v=null;for("number"==typeof Q&&(v=Q,Q=function(){return null});null!==v||null!==(v=Q());)65535>=v?V(v):(v-=65536,V((v>>10)+55296),V(v%1024+56320)),v=null},n.decodeUTF8toUTF16=function(D,R){n.decodeUTF8(D,function($){n.UTF8toUTF16($,R)})},n.calculateCodePoint=function(i){return 128>i?1:2048>i?2:65536>i?3:4},n.calculateUTF8=function(D){for(var y,r=0;null!==(y=D());)r+=128>y?1:2048>y?2:65536>y?3:4;return r},n.calculateUTF16asUTF8=function(v){var p=0,i=0;return n.UTF16toUTF8(v,function(z){++p,i+=128>z?1:2048>z?2:65536>z?3:4}),[p,i]},n}();J.readString=function(T,l,R){"number"==typeof l&&(R=l,l=A);var X="undefined"==typeof R;if(X&&(R=this.offset),"undefined"==typeof l&&(l=m.METRICS_CHARS),!this.noAssert){if("number"!=typeof T||0!==T%1)throw TypeError("Illegal length: "+T+" (not an integer)");if(T|=0,"number"!=typeof R||0!==R%1)throw TypeError("Illegal offset: "+R+" (not an integer)");if(R>>>=0,0>R||R+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+R+" (+"+0+") <= "+this.buffer.byteLength)}var b,c=0,O=R;if(l===m.METRICS_CHARS){if(b=i(),_.decodeUTF8(function(){return T>c&&R<this.limit?this.view[R++]:null}.bind(this),function(D){++c,_.UTF8toUTF16(D,b)}),c!==T)throw RangeError("Illegal range: Truncated data, "+c+" == "+T);return X?(this.offset=R,b()):{string:b(),length:R-O}}if(l===m.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof R||0!==R%1)throw TypeError("Illegal offset: "+R+" (not an integer)");if(R>>>=0,0>R||R+T>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+R+" (+"+T+") <= "+this.buffer.byteLength)}var e=R+T;if(_.decodeUTF8toUTF16(function(){return e>R?this.view[R++]:null}.bind(this),b=i(),this.noAssert),R!==e)throw RangeError("Illegal range: Truncated data, "+R+" == "+e);return X?(this.offset=R,b()):{string:b(),length:R-O}}throw TypeError("Unsupported metrics: "+l)};var s=function(h){if(h.length){for(var w=0;w<h.length;w++)if(!h[w])return;var o=h[0],U=new m(0);U.buffer=o,U.limit=o.byteLength,U.view=o.byteLength>0?new Uint8Array(o):null,U.buffers=h;var l=[];return $(l,U),T(l,U),Q(l,U),l}},$=function(N,G){G.offset+=19},T=function(Y,v){var C=v.readUint8();1&C&&(Y.center=D(v)),2&C&&(Y.rawS3=D(v))},v=function(Z){return[Z.readFloat32(),Z.readFloat32()]},D=function(T){return[T.readFloat32(),T.readFloat32(),T.readFloat32()]},r=function(r){var a=r.readUint32();return r.readString(a,m.METRICS_BYTES)},Q=function(X,h){for(var _=h.readUint8(),n=0;_>n;n++)X.push(x(h))},x=function(G){var Z={},T=G.readUint32(),I=0,K=T&1<<I++,R=T&1<<I++,H=T&1<<I++,u=T&1<<I++,e=T&1<<I++,Q=T&1<<I++,c=T&1<<I++,O=T&1<<I++,d=T&1<<I++,n=T&1<<I++,M=T&1<<I++,B=T&1<<I++;return(K||R)&&W(Z,G,3,"vs","lvs"),H&&W(Z,G,2,"uv"),u&&W(Z,G,3,"ns"),e&&(Z.name=r(G)),Q&&(Z.color=D(G)),c&&(Z.transparent=!!G.readUint8()),O&&(Z.opacity=G.readFloat32()),d&&(Z.uvoffset=v(G)),n&&(Z.uvScale=D(G)),M&&(Z.image=r(G)),B&&(Z.reverseFlip=!!G.readUint8()),Z},d=16383,o=function(o){var r=o.readUint16(),A=16384&r,m=32768&r,D=(r&d)/d,g=0;return m&&(g=o.readUint16()),(A?1:-1)*(g+D)},e=function(z){var s=z.readUint32(),u=s&1<<30,M=s&1<<29,m=s&1<<28,$=16383,d=(16383&s>>14)/$,o=(16383&s)/$,r=Math.sqrt(1-d*d-o*o)||0;return[d*(u?1:-1),o*(M?1:-1),r*(m?1:-1)]},W=function(S,p,i,V,u){var J=p.readUint32();p.readUint8();var c,L,x,X=p.readUint32(),g=p.readUint32(),I=[];if("uv"===V)for(c=0;J>c;c++)L=o(p),x=o(p),I.push([L,x]);else if("ns"===V)for(c=0;J>c;c++)I.push(e(p));else for(var c=0;J>c;c++)I.push(D(p));var y;y=256>J?"readUint8":65536>J?"readUint16":16777216>J?"readUint24":"readUint32";var j,P,M;if(X)for(j=S[V]=[],c=0;X>c;c++)P=p[y](),M=I[P],"uv"===V?j.push(M[0],M[1]):j.push(M[0],M[1],M[2]);if(g)for(j=S[u]=[],c=0;g>c;c++)P=p[y](),M=I[P],j.push(M[0],M[1],M[2])};a.getInternal().addMethod(a,{loadBin:function(z,K){K=K||{};var V=function(r){var m,W=K.finishFunc,F=K.shape3d,y=s(r);if(y){if(F)m=a.getShape3dModel(F);else{m=[];for(var V in y){var D=y[V];m.rawS3=D.rawS3,m.push(D)}}W&&W(y,m,m.rawS3)}else W&&W(null)},c=function(Z){var E=K.finishFunc;if(!Z)return E&&E(null),void 0;if(Z.byteLength<50){var l=new Uint8Array(Z),_=l[9];if(_>1){for(var h=[],X=z.substr(0,z.length-4),N=1;_>N;N++)h.push(X+N+".bin");return a.xhrLoad(h,function(B){B.splice(0,0,Z),V(B)},K),void 0}}V([Z])};K.responseType="arraybuffer",a.xhrLoad(z,function(Q){c(Q)},K)},parseBin:function(j){return s([j])}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);