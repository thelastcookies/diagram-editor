!function(P){"use strict";var G="ht",I=P[G],R=I.Default,A=Math,t=(A.PI,A.sin,A.cos,A.atan2,A.sqrt,A.max),V=A.floor,q=(A.round,A.ceil),h=I.Shape,Q=(I.Edge,I.List),M=I.Style,X=I.graph,x=R.getInternal(),L=x.ui(),i=null,d="prototype",c=P.clearInterval,z=P.setInterval,B=function(s){var E=s.data,C=this.dm();if(E&&"add"===s.kind){var T=C.$1c,y=E instanceof h?"shape.":"edge.";T&&E.s(y+"dash.flow")&&T.indexOf(E)<0&&T.push(E)}"clear"===s.kind&&(C.$1c=[])},m=function(P){var S=P.property,V=P.data,K=P.newValue,G=this.dm().$1c,Q=V instanceof h?"s:shape.dash.flow":"s:edge.dash.flow";if(G&&S===Q)if(K)G.indexOf(V)<0&&G.push(V);else for(var l=G.length,D=0;l>D;D++)if(G[D]===V){G.splice(D,1);break}},C=X.GraphView[d],a=L.EdgeUI[d],W=L.ShapeUI[d],_=W._80o,k=a._80o,O=I.DataModel[d],p=O.prepareRemove,l=C.setDataModel;M["edge.dash.flow.step"]==i&&(M["edge.dash.flow.step"]=3),M["shape.dash.flow.step"]==i&&(M["shape.dash.flow.step"]=3),O.prepareRemove=function(A){p.call(this,A);var Q=A._dataModel,v=Q.$1c;if(v)for(var G=v.length,F=0;G>F;F++)if(v[F]===A){v.splice(F,1);break}},C.setDataModel=function(K){var R=this,O=R._dataModel;if(O!==K){O&&(O.umm(B,R),O.umd(m,R),O.$1c=[]),K.mm(B,R),K.md(m,R);var i=K.$1c=[];K.each(function(p){var Z=p instanceof h?"shape.":"edge.";p.s(Z+"dash.flow")&&i.indexOf(p)<0&&i.push(p)}),l.call(R,K)}},C.setDashFlowInterval=function(Z){var $=this,y=$.$2c;$.$2c=Z,$.fp("dashFlowInterval",y,Z),$.$3c!=i&&(c($.$3c),delete $.$3c,$.enableDashFlow(Z))},C.getDashFlowInterval=function(){return this.$2c},C.$4c=function(){var Y,p,c,j=this,l=j.tx(),z=j.ty(),L=j._zoom,T=j.getWidth(),v=j.getHeight(),B={x:-l/L,y:-z/L,width:T/L,height:v/L},r=j.dm().$1c,h=j._56I,y=new Q;if(r.forEach(function(I){h[I.getId()]&&(Y=j.getDataUI(I),Y&&(c=Y._79o(),c&&y.add(c)))}),0!==y.size()&&(y.each(function(z){R.intersectsRect(B,z)&&(p=R.unionRect(p,z))}),p&&(p&&(R.grow(p,t(1,1/L)),p.x=V(p.x*L)/L,p.y=V(p.y*L)/L,p.width=q(p.width*L)/L,p.height=q(p.height*L)/L,p=R.intersection(B,p)),p))){var w=j._canvas.getContext("2d");w.save(),w.lineCap=R.lineCap,w.lineJoin=R.lineJoin;var m=R.devicePixelRatio,i=p.x,A=p.y,E=p.width,C=p.height;i=Math.floor((i*L+l)*m),A=Math.floor((A*L+z)*m),E=Math.ceil(E*L*m)+1,C=Math.ceil(C*L*m)+1,p.x=(i/m-l)/L,p.y=(A/m-z)/L,p.width=E/m/L,p.height=C/m/L,w.beginPath(),w.rect(i,A,E,C),w.clip(),w.clearRect(i,A,E,C),x.translateAndScale(w,l,z,L),j.$5c(w,p),w.restore()}},C.$5c=function(m,P){var M,T,f=this;f._93db(m),f.each(function(s){f._56I[s._id]&&(M=f.getDataUI(s),M&&(T=M._79o(),(!P||R.intersectsRect(P,T))&&(M.$7c=!0,M._42(m),delete M.$7c)))}),f._92db(m)},C.enableDashFlow=function(M){var b=this;b.$3c==i&&(b.$3c=z(function(){b.$4c()},M||b.$2c||50))},C.disableDashFlow=function(){var N=this;c(N.$3c),delete N.$3c};var o=function(){var u=this,H=u._data,P=H instanceof h?"shape.":"edge.",e=H.s(P+"dash.pattern"),W=H.s(P+"dash.flow.reverse");if(e&&H.s(P+"dash")&&H.s(P+"dash.flow")&&u.$7c){var V=u.s(P+"dash.offset")||0,B=H.s(P+"dash.flow.step"),k=H.getStyleMap(),F=0;e.forEach(function(Z){F+=Z}),W&&(B=-B),V-=B,V%=F,k||(H._styleMap=k={}),k[P+"dash.offset"]=V}};a._80o=function(u){k.call(this,u),o.call(this)},W._80o=function(y){_.call(this,y),o.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);