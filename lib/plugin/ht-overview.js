!function(P,n){"use strict";var D="ht",M=D+".graph.",U=P[D],R=U.graph,F=U.Default,S=U.Color,V=null,B="px",E=F.getInternal(),_=E.getPinchDist,b=F.preventDefault,K=F.getTouchCount,I=F.startDragging;E.addMethod(F,{overviewBackground:S.widgetBackground,overviewMaskBackground:S.transparent,overviewContentBorderColor:S.widgetBorder,overviewContentBackground:S.background},!0),R.Overview=function(r){var M=this,Z=M._view=E.createView(1,M);M._canvas=E.createCanvas(Z),Z.style.background=F.overviewBackground,Z.appendChild(M._mask=E.createDiv()),M.setGraphView(r),M.addListeners()},F.def(M+"Overview",n,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:F.overviewMaskBackground,_contentBorderColor:F.overviewContentBorderColor,_contentBackground:F.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(A){var h=this;if(h.gv!==A){var w=h.gv;h.gv=A,w&&(w.removeViewListener(h.handleGraphViewChanged,h),w.ump(h.handleGraphViewPropertyChanged,h)),A&&(A.addViewListener(h.handleGraphViewChanged,h),A.mp(h.handleGraphViewPropertyChanged,h)),h.fp("graphView",w,A),h.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(V){this._autoUpdate&&"validate"===V.kind&&this.redraw()},handleGraphViewPropertyChanged:function(W){("canvasBackground"===W.property||this.getFixToRect()&&("zoom"===W.property||"translateX"===W.property||"translateY"===W.property))&&this.redraw()},redraw:function(){var B=this;B._redraw||(B._redraw=1,B.iv(50))},validateImpl:function(){var f=this,L=f.gv,R=f._canvas,Y=f.getWidth(),g=f.getHeight(),Q=f._redraw,m=F.devicePixelRatio;if(L){var y=f._mask,_=y.style,d=L.getViewRect(),S=this.getFixToRect(),p=S?"boolean"==typeof S?L.getContentRect():S:L.getScrollRect(),q=p.x,O=p.y,H=p.width,e=p.height,A=f._rate=Math.max(H/Y,e/g),r=f._x=(Y-H/A)/2,D=f._y=(g-e/A)/2;if(0!==d.width&&0!==d.height||f.hasRetry||(F.callLater(f.iv,f,V),f.hasRetry=!0),(Y!==R.clientWidth||g!==R.clientHeight)&&(E.setCanvas(R,Y,g),Q=1),E.isSameRect(p,f._scrollRect)||(f._scrollRect=p,Q=1),Q){var J=E.initContext(R),$=L.getDataModel(),U=$.getBackground()||f._contentBackground,M=f._contentBorderColor;J.clearRect(0,0,Y*m,g*m);var N=$.getBackground()&&$.a("width")>0&&$.a("height")>0;U&&!N&&E.fillRect(J,r*m,D*m,H/A*m,e/A*m,U),E.translateAndScale(J,-q/A+r,-O/A+D,1/A),L._42(J),J.restore(),M&&E.drawBorder(J,M,r*m,D*m,H/A*m,e/A*m)}_.background=f._maskBackground,_.left=r+(d.x-q)/A+B,_.top=D+(d.y-O)/A+B,_.width=d.width/A+B,_.height=d.height/A+B,f._redraw=null}else if(Q){var J=E.initContext(R);J.clearRect(0,0,Y*m,g*m),J.restore(),f._redraw=null}},center:function(A){var K=this,T=K.gv;if(T){var G=T._zoom,V=T._29I,p=K._rate,W=K._scrollRect,B=F.getLogicalPoint(A,K._canvas),c=W.x+(B.x-K._x)*p,y=W.y+(B.y-K._y)*p;T.setTranslate((V.width/2-c)*G,(V.height/2-y)*G)}},handle_mousedown:function(u){this.handle_touchstart(u)},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)},handleWindowMouseMove:function(s){this.handleWindowTouchMove(s)},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta)},handle_DOMMouseScroll:function(q){2===q.axis&&this.handleScroll(q,-q.detail)},handleScroll:function(C,m){if(b(C),this.gv){var v=this.gv;m>0?v.scrollZoomIn():0>m&&v.scrollZoomOut()}},handle_touchstart:function(z){if(b(z),this.gv&&F.isLeftButton(z)){var j=this,w=j.gv,E=K(z);1===E?F.isDoubleClick(z)&&w.isResettable()?w.reset():(j.center(z),I(j,z)):2===E&&(j._dist=_(z),I(j,z))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(m){if(this.gv){var z=this,$=z._dist,x=K(m);1===x?z.center(m):2===x&&$!=V&&z.gv.handlePinch(V,_(m),$)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);